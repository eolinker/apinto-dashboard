<div class="">
  <div
    class="pl-btnbase pr-btnrbase py-btnybase flex flex-nowrap items-center justify-between list-header"
    *ngIf="!disabledEditUser"
  >
    <div>
      <button
        eo-ng-button
        *ngIf="listType"
        class="ant-btn-primary"
        eoNgUserAccess="system/role"
        (click)="openModal('addUser')"
        (disabledEdit)="disabledEdit($event)"
      >
        新建用户
      </button>
      <button
        eo-ng-button
        *ngIf="listType"
        class="ml-btnybase"
        [disabled]="usersSet.size === 0 || nzDisabled"
        (click)="deleteUserModal()"
      >
        删除
      </button>
      <button
        eo-ng-button
        *ngIf="!listType"
        class="ant-btn-primary"
        eoNgUserAccess="system/role"
        (click)="openModal('addUserToRole')"
        (disabledEdit)="disabledEdit($event)"
      >
        添加用户
      </button>
      <button
        eo-ng-button
        *ngIf="!listType"
        class="ml-btnybase"
        [disabled]="usersSet.size === 0 || nzDisabled"
        (click)="removeUserRoleModal()"
      >
        移除
      </button>
    </div>
    <div class="floatR group-search-large">
      <eo-ng-search-input-group
        [eoInputVal]="keyword"
        (eoClick)="keyword = ''; getUsersList()"
      >
        <input
          class="search"
          type="text"
          eo-ng-input
          placeholder="搜索账号或名称"
          [(ngModel)]="keyword"
          (keyup.enter)="getUsersList()"
        />
      </eo-ng-search-input-group>
    </div>
  </div>
  <div
    class="list-content"
    [ngClass]="{ 'list-content-no-top': disabledEditUser }"
  >
    <eo-ng-apinto-table
      class=""
      [nzTbody]="usersTableBody"
      [nzThead]="usersTableHeadName"
      [nzData]="usersList"
      [nzTrClick]="usersTableClick"
      [nzMaxOperatorButton]="3"
    >
    </eo-ng-apinto-table>
  </div>

  <ng-template #switchTpl let-item="item">
    <eo-ng-switch
      [(ngModel)]="item.status_boolean"
      [nzControl]="true"
      (click)="changeUserStatus($event, item)"
      [nzDisabled]="nzDisabled"
    ></eo-ng-switch>
  </ng-template>

  <ng-template #selectTpl let-item="item">
    <eo-ng-select
      eoNgUserAccess="system/role"
      [nzOptions]="rolesList"
      [(ngModel)]="item.role_ids[0]"
      (ngModelChange)="changeUserRole(item)"
      (click)="$event.stopPropagation()"
      [nzDisabled]="nzDisabled || item.id === appService.getUserId()"
    ></eo-ng-select>
  </ng-template>
</div>
