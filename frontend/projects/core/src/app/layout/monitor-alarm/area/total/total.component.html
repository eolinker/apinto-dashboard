<div class="list-without-sider monitor-total-content">
  <div class="list-header px-btnbase py-btnybase sticky top-0 bg-FIX_BG z-10">
    <div class="">
      <label class="">筛选集群：</label>
      <eo-ng-select
        class="w-INPUT_NORMAL"
        [(ngModel)]="queryData.clusters"
        [nzOptions]="listOfClusters"
        nzMode="multiple"
        nzPlaceHolder="请选择"
      ></eo-ng-select>

      <label class="ml-btnybase label">选择时间：</label>
      <eo-ng-radio-group
        class="date-picker-button-group"
        [(ngModel)]="timeButton"
        [nzOptions]="timeButtonOptions"
        nzStyle="button"
        nzButtonStyle="solid"
      ></eo-ng-radio-group>
      <nz-range-picker
        class="date-picker-button-group"
        [(ngModel)]="datePickerValue"
        [nzDisabledDate]="disabledDate"
        (nzOnOpenChange)="openDatePicker($event)"
      ></nz-range-picker>

      <button class="ml-btnybase" eo-ng-button (click)="resetQuery()">
        重置
      </button>
      <button
        class="ant-btn-primary ml-btnybase"
        eo-ng-button
        (click)="getMonitorData()"
      >
        查询
      </button>
    </div>
  </div>
  <div class="pie-area px-btnbase mb-[28px]">
    <div class="pie-block mr-[20px]">
      <div class="chart-title">请求统计</div>
      <ng-container *ngIf="!requestStaticError; else emptyPiereRequestTpl">
        <div style="display: flex">
          <eo-ng-monitor-pie-graph
            #requestPieRef
            style="width: 75%"
            title="请求统计"
            [pieData]="requestPie"
            labelName="请求成功率"
            [labelValue]="requestSucRate"
            subtext="请求总数"
            [subvalue]="changeNumberUnit(requestStatic.total)"
          >
          </eo-ng-monitor-pie-graph>
          <div class="pie-static-block">
            <div class="pie-static">
              <ul>
                <li style="height: 22px"></li>
                <li>
                  状态码4XX数<span class="pie-value">{{
                    changeNumberUnit(requestStatic.status4xx)
                  }}</span>
                </li>
                <li>
                  状态码5XX数<span class="pie-value">{{
                    changeNumberUnit(requestStatic.status5xx)
                  }}</span>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </ng-container>
    </div>
    <div class="pie-block">
      <div class="chart-title">转发统计</div>
      <ng-container *ngIf="!proxyStaticError; else emptyPieProxyTpl">
        <div style="display: flex">
          <eo-ng-monitor-pie-graph
            #proxyPieRef
            style="width: 75%"
            title="转发统计"
            [pieData]="proxyPie"
            labelName="转发成功率"
            [labelValue]="proxySucRate"
            subtext="转发总数"
            [subvalue]="changeNumberUnit(proxyStatic.total)"
          ></eo-ng-monitor-pie-graph>
          <div class="pie-static-block">
            <div class="pie-static">
              <ul>
                <li style="height: 22px"></li>
                <li>
                  状态码4XX数<span class="pie-value">{{
                    changeNumberUnit(proxyStatic.status4xx)
                  }}</span>
                </li>
                <li>
                  状态码5XX数<span class="pie-value">{{
                    changeNumberUnit(proxyStatic.status5xx)
                  }}</span>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </ng-container>
    </div>
    <ng-template #emptyPiereRequestTpl>
      <eo-ng-empty></eo-ng-empty>
    </ng-template>
    <ng-template #emptyPieProxyTpl>
      <eo-ng-empty></eo-ng-empty>
    </ng-template>
  </div>
  <div class="line-block mb-[20px]">
    <ng-container *ngIf="!invokeStaticError; else emptyInvokeTpl">
      <eo-ng-monitor-line-graph
        #invokeLineRef
        [titles]="['调用量统计']"
        [lineData]="invokeStatic"
        [yAxisTitle]="timeUnit"
        type="invoke"
      ></eo-ng-monitor-line-graph>
    </ng-container>
    <ng-template #emptyInvokeTpl>
      <p class="chart-title ml-[16px]">调用量统计</p>
      <eo-ng-empty></eo-ng-empty>
    </ng-template>
  </div>
  <div class="line-block mb-[40px]">
    <ng-container *ngIf="!trafficStaticError; else emptyTrafficTpl">
      <eo-ng-monitor-line-graph
        #trafficLineRef
        [titles]="['报文量统计']"
        [yAxisTitle]="timeUnit"
        [lineData]="trafficStatic"
        type="traffic"
      ></eo-ng-monitor-line-graph>
    </ng-container>
    <ng-template #emptyTrafficTpl>
      <p class="chart-title ml-[16px]">调用量统计</p>
      <eo-ng-empty></eo-ng-empty>
    </ng-template>
  </div>
  <div class="table-block not-lr-border monitor-table">
    <eo-ng-tabs
      [(nzSelectedIndex)]="selectedIndex"
      [nzOptions]="optionsList"
      (nzSelectChange)="getTablesData(tableTypeList[selectedIndex])"
    ></eo-ng-tabs>
    <ng-template #apiTableTpl>
      <div class="list-content mt-[16px]">
        <eo-ng-monitor-alarm-table
          type="apiTop10"
          [nzTableList]="tableList.api"
          [nzTableConfig]="apiTableConfig"
          [nzTableBody]="apiTableBody"
          [nzTableHead]="apiTableName"
          [nzDropdownMenu]="apiTableDropdownMenu"
          (btnClick)="goToDetail($event, 'api')"
        ></eo-ng-monitor-alarm-table>
      </div>
    </ng-template>
    <ng-template #appTableTpl>
      <div class="list-content mt-[16px]">
        <eo-ng-monitor-alarm-table
          type="appTop10"
          [nzTableList]="tableList.app"
          [nzTableConfig]="appTableConfig"
          [nzTableBody]="appTableBody"
          [nzTableHead]="appTableName"
          [nzDropdownMenu]="appTableDropdownMenu"
          (btnClick)="goToDetail($event, 'app')"
        ></eo-ng-monitor-alarm-table>
      </div>
    </ng-template>
    <ng-template #upstreamTableTpl>
      <div class="list-content mt-[16px]">
        <eo-ng-monitor-alarm-table
          type="upstreamTop10"
          [nzTableList]="tableList.service"
          [nzTableConfig]="serviceTableConfig"
          [nzTableBody]="serviceTableBody"
          [nzTableHead]="serviceTableName"
          [nzDropdownMenu]="serviceTableDropdownMenu"
          (btnClick)="goToDetail($event, 'service')"
        ></eo-ng-monitor-alarm-table>
      </div>
    </ng-template>
  </div>
</div>
