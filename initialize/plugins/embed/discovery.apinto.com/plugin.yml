id: "discovery.apinto.com"
name: "discovery"
cname: "服务发现"
resume: "使用一个注册中心来记录分布式系统中的全部服务的信息，以便其他服务能够快速的找到这些已注册的服务。"
version: "v1.0.7"
icon: "logo.png"
driver: "discovery.apinto.com"
type: 1 #0为框架模块 1为核心模块 2为内置模块 3为非内置
auto: true
is_can_disable: false
is_can_uninstall: false
visible_in_navigation: true
visible_in_market: true
front: upstream
navigation: "navigation.infrastructure"
group_id: "core_module"
define:  # 动态模块定义
  profession: discovery
  drivers:
    - name: consul
      title: Consul
    - name: eureka
      title: Eureka
    - name: nacos
      title: Nacos
  skill: Discovery
  fields:
    - name: title           # 定义从响应中对应字段中获取显示值
      title: 名称
    - name: id
      title: ID
    - name: driver
      title: 驱动名称
    - name: description
      title: 描述
  render:
    consul: |
      {
          "type": "object",
          "properties": {
              "config": {
                  "type": "object",
                  "properties": {
                      "address": {
                          "type": "void",
                          "title": "Consul服务地址",
                          "x-decorator": "FormItem",
                          "properties": {
                              "use_variable": {
                                  "type": "number",
                                  "x-decorator": "FormItem",
                                  "x-component": "Checkbox.Group",
                                  "x-validator": [],
                                  "x-component-props": {},
                                  "x-decorator-props": {},
                                  "enum": [
                                      {
                                          "children": [],
                                          "label": "引用环境变量",
                                          "value": 1
                                      }
                                  ],
                                  "x-index": 0
                              },
                              "variable": {
                                  "type": "void",
                                  "properties": {
                                      "address_variable":{
                                          "type": "array",
                                          "x-decorator": "FormItem",
                                          "maxItems": 3,
                                          "x-component": "ArrayItems",
                                          "items": {
                                              "type": "void",
                                              "x-component": "Space",
                                              "properties": {
                                                  "input": {
                                                      "type": "string",
                                                      "x-decorator": "FormItem",
                                                      "x-decorator-props":{
                                                          "feedbackLayout":"none"
                                                      },
                                                      "x-component": "Input",
                                                      "x-disabled":true
                                                  },
                                                  "quote": {
                                                      "type": "string",
                                                      "x-decorator": "FormItem",
                                                      "x-decorator-props":{
                                                          "feedbackLayout":"none"
                                                      },
                                                      "x-component": "CustomEnvVariableComponent"
                                                  }
                                              }
                                          },
                                          "default":[""]
                                      }
                                  },
                                  "x-reactions": [
                                      {
                                          "dependencies": [
                                              ".use_variable"
                                          ],
                                          "when": "{{$deps[0] == 1}}",
                                          "fulfill": {
                                              "state": {
                                                  "visible": true
                                              }
                                          },
                                          "otherwise": {
                                              "state": {
                                                  "visible": false
                                              }
                                          }
                                      }
                                  ],
                                  "x-index": 1
                              },
                              "address_static": {
                                  "type": "array",
                                  "title": "",
                                  "x-decorator": "FormItem",
                                  "x-component": "ArrayItems",
                                  "items": {
                                      "type": "void",
                                      "x-decorator": "FormItem",
                                      "x-component": "Space",
                                      "x-decorator-props": {
                                          "asterisk": true,
                                          "feedbackLayout": "none"
                                      },
                                      "properties": {
                                          "sort": {
                                              "type": "void",
                                              "x-decorator": "FormItem",
                                              "x-component": "ArrayItems.SortHandle"
                                          },
                                          "addr": {
                                              "type": "string",
                                              "x-decorator": "FormItem",
                                              "x-component": "Input",
                                              "required":true,
                                              "x-component-props": {
                                                  "placeholder": "请输入协议+主机名或IP+端口"
                                              }
                                          },
                                          "remove": {
                                              "type": "void",
                                              "x-decorator": "FormItem",
                                              "x-component": "ArrayItems.Remove"
                                          }
                                      }
                                  },
                                  "properties": {
                                      "add": {
                                          "type": "void",
                                          "title": "添加地址信息",
                                          "x-component": "ArrayItems.Addition",
                                          "x-reactions": [
                                              {
                                                  "dependencies": [
                                                      "../use_variable"
                                                  ],
                                                  "when": "{{$deps[0] == 1}}",
                                                  "fulfill": {
                                                      "state": {
                                                          "visible": false
                                                      }
                                                  },
                                                  "otherwise": {
                                                      "state": {
                                                          "visible": true
                                                      }
                                                  }
                                              }
                                          ],
                                          "x-component-props": {}
                                      }
                                  },
                                  "x-reactions": [
                                      {
                                          "dependencies": [
                                              ".use_variable"
                                          ],
                                          "when": "{{$deps[0] == 1}}",
                                          "fulfill": {
                                              "state": {
                                                  "visible": false
                                              }
                                          },
                                          "otherwise": {
                                              "state": {
                                                  "visible": true
                                              }
                                          }
                                      }
                                  ],
                                  "x-validator": [],
                                  "x-component-props": {},
                                  "x-decorator-props": {}
                              },
                              "address":{
                                  "type":"array",
                                  "x-visible":"false",
                                  "x-reactions":{
                                      "dependencies": [
                                          ".use_variable",".address_variable",".address_static"
                                      ],
                                      "when": "{{$deps[0]?.length}}",
                                      "fulfill": {
                                          "state": {
                                              "value": "{{$deps[1]}}"
                                          }
                                      },
                                      "otherwise": {
                                          "state": {
                                              "value": "{{$deps[2]}}"
                                          }
                                      }
                                  }

                              }
                          },
                          "x-decorator-props": {
                              "labelCol": 6,
                              "wrapperCol": 10
                          },
                          "x-index": 0
                      },
                      "params": {
                          "type": "string",
                          "title": "参数",
                          "x-decorator": "FormItem",
                          "x-component": "SimpleMapComponent",
                          "x-validator": [],
                          "x-component-props": {
                              "placeholderKey": "请输入参数名",
                              "placeholderValue": "请输入参数值"
                          },
                          "x-decorator-props": {
                              "labelCol": 6,
                              "wrapperCol": 10
                          },
                          "x-index": 1
                      }
                  }
              }
          }
      }
    nacos: |
      {
          "type": "object",
          "properties": {
              "config": {
                  "type": "object",
                  "properties": {
                      "address": {
                          "type": "void",
                          "title": "Nacos服务地址",
                          "x-decorator": "FormItem",
                          "properties": {
                              "use_variable": {
                                  "type": "number",
                                  "x-decorator": "FormItem",
                                  "x-component": "Checkbox.Group",
                                  "x-validator": [],
                                  "x-component-props": {},
                                  "x-decorator-props": {},
                                  "enum": [
                                      {
                                          "children": [],
                                          "label": "引用环境变量",
                                          "value": 1
                                      }
                                  ],
                                  "x-index": 0
                              },
                              "variable": {
                                  "type": "void",
                                  "properties": {
                                      "address_variable":{
                                          "type": "array",
                                          "x-decorator": "FormItem",
                                          "maxItems": 3,
                                          "x-component": "ArrayItems",
                                          "items": {
                                              "type": "void",
                                              "x-component": "Space",
                                              "properties": {
                                                  "input": {
                                                      "type": "string",
                                                      "x-decorator": "FormItem",
                                                      "x-decorator-props":{
                                                          "feedbackLayout":"none"
                                                      },
                                                      "x-component": "Input",
                                                      "x-disabled":true
                                                  },
                                                  "quote": {
                                                      "type": "string",
                                                      "x-decorator": "FormItem",
                                                      "x-decorator-props":{
                                                          "feedbackLayout":"none"
                                                      },
                                                      "x-component": "CustomEnvVariableComponent"
                                                  }
                                              }
                                          },
                                          "default":[""]
                                      }
                                  },
                                  "x-reactions": [
                                      {
                                          "dependencies": [
                                              ".use_variable"
                                          ],
                                          "when": "{{$deps[0] == 1}}",
                                          "fulfill": {
                                              "state": {
                                                  "visible": true
                                              }
                                          },
                                          "otherwise": {
                                              "state": {
                                                  "visible": false
                                              }
                                          }
                                      }
                                  ],
                                  "x-index": 1
                              },
                              "address_static": {
                                  "type": "array",
                                  "title": "",
                                  "x-decorator": "FormItem",
                                  "x-component": "ArrayItems",
                                  "items": {
                                      "type": "void",
                                      "x-decorator": "FormItem",
                                      "x-component": "Space",
                                      "x-decorator-props": {
                                          "asterisk": true,
                                          "feedbackLayout": "none"
                                      },
                                      "properties": {
                                          "sort": {
                                              "type": "void",
                                              "x-decorator": "FormItem",
                                              "x-component": "ArrayItems.SortHandle"
                                          },
                                          "addr": {
                                              "type": "string",
                                              "x-decorator": "FormItem",
                                              "x-component": "Input",
                                              "required":true,
                                              "x-component-props": {
                                                  "placeholder": "请输入协议+主机名或IP+端口"
                                              }
                                          },
                                          "remove": {
                                              "type": "void",
                                              "x-decorator": "FormItem",
                                              "x-component": "ArrayItems.Remove"
                                          }
                                      }
                                  },
                                  "properties": {
                                      "add": {
                                          "type": "void",
                                          "title": "添加地址信息",
                                          "x-component": "ArrayItems.Addition",
                                          "x-reactions": [
                                              {
                                                  "dependencies": [
                                                      "../use_variable"
                                                  ],
                                                  "when": "{{$deps[0] == 1}}",
                                                  "fulfill": {
                                                      "state": {
                                                          "visible": false
                                                      }
                                                  },
                                                  "otherwise": {
                                                      "state": {
                                                          "visible": true
                                                      }
                                                  }
                                              }
                                          ],
                                          "x-component-props": {}
                                      }
                                  },
                                  "x-reactions": [
                                      {
                                          "dependencies": [
                                              ".use_variable"
                                          ],
                                          "when": "{{$deps[0] == 1}}",
                                          "fulfill": {
                                              "state": {
                                                  "visible": false
                                              }
                                          },
                                          "otherwise": {
                                              "state": {
                                                  "visible": true
                                              }
                                          }
                                      }
                                  ],
                                  "x-validator": [],
                                  "x-component-props": {},
                                  "x-decorator-props": {}
                              },
                              "address":{
                                  "type":"array",
                                  "x-visible":"false",
                                  "x-reactions":{
                                      "dependencies": [
                                          ".use_variable",".address_variable",".address_static"
                                      ],
                                      "when": "{{$deps[0]?.length}}",
                                      "fulfill": {
                                          "state": {
                                              "value": "{{$deps[1]}}"
                                          }
                                      },
                                      "otherwise": {
                                          "state": {
                                              "value": "{{$deps[2]}}"
                                          }
                                      }
                                  }

                              }
                          },
                          "x-decorator-props": {
                              "labelCol": 6,
                              "wrapperCol": 10
                          },
                          "x-index": 0
                      },
                      "params": {
                          "type": "string",
                          "title": "参数",
                          "x-decorator": "FormItem",
                          "x-component": "SimpleMapComponent",
                          "x-validator": [],
                          "x-component-props": {
                              "placeholderKey": "请输入参数名",
                              "placeholderValue": "请输入参数值"
                          },
                          "x-decorator-props": {
                              "labelCol": 6,
                              "wrapperCol": 10
                          },
                          "x-index": 1
                      }
                  }
              }
          }
      }
    eureka: |
      {
          "type": "object",
          "properties": {
              "config": {
                  "type": "object",
                  "properties": {
                      "address": {
                          "type": "void",
                          "title": "Eureka服务地址",
                          "x-decorator": "FormItem",
                          "properties": {
                              "use_variable": {
                                  "type": "number",
                                  "x-decorator": "FormItem",
                                  "x-component": "Checkbox.Group",
                                  "x-validator": [],
                                  "x-component-props": {},
                                  "x-decorator-props": {},
                                  "enum": [
                                      {
                                          "children": [],
                                          "label": "引用环境变量",
                                          "value": 1
                                      }
                                  ],
                                  "x-index": 0
                              },
                              "variable": {
                                  "type": "void",
                                  "properties": {
                                      "address_variable":{
                                          "type": "array",
                                          "x-decorator": "FormItem",
                                          "maxItems": 3,
                                          "x-component": "ArrayItems",
                                          "items": {
                                              "type": "void",
                                              "x-component": "Space",
                                              "properties": {
                                                  "input": {
                                                      "type": "string",
                                                      "x-decorator": "FormItem",
                                                      "x-decorator-props":{
                                                          "feedbackLayout":"none"
                                                      },
                                                      "x-component": "Input",
                                                      "x-disabled":true
                                                  },
                                                  "quote": {
                                                      "type": "string",
                                                      "x-decorator": "FormItem",
                                                      "x-decorator-props":{
                                                          "feedbackLayout":"none"
                                                      },
                                                      "x-component": "CustomEnvVariableComponent"
                                                  }
                                              }
                                          },
                                          "default":[""]
                                      }
                                  },
                                  "x-reactions": [
                                      {
                                          "dependencies": [
                                              ".use_variable"
                                          ],
                                          "when": "{{$deps[0] == 1}}",
                                          "fulfill": {
                                              "state": {
                                                  "visible": true
                                              }
                                          },
                                          "otherwise": {
                                              "state": {
                                                  "visible": false
                                              }
                                          }
                                      }
                                  ],
                                  "x-index": 1
                              },
                              "address_static": {
                                  "type": "array",
                                  "title": "",
                                  "x-decorator": "FormItem",
                                  "x-component": "ArrayItems",
                                  "items": {
                                      "type": "void",
                                      "x-decorator": "FormItem",
                                      "x-component": "Space",
                                      "x-decorator-props": {
                                          "asterisk": true,
                                          "feedbackLayout": "none"
                                      },
                                      "properties": {
                                          "sort": {
                                              "type": "void",
                                              "x-decorator": "FormItem",
                                              "x-component": "ArrayItems.SortHandle"
                                          },
                                          "addr": {
                                              "type": "string",
                                              "x-decorator": "FormItem",
                                              "x-component": "Input",
                                              "required":true,
                                              "x-component-props": {
                                                  "placeholder": "请输入协议+主机名或IP+端口"
                                              }
                                          },
                                          "remove": {
                                              "type": "void",
                                              "x-decorator": "FormItem",
                                              "x-component": "ArrayItems.Remove"
                                          }
                                      }
                                  },
                                  "properties": {
                                      "add": {
                                          "type": "void",
                                          "title": "添加地址信息",
                                          "x-component": "ArrayItems.Addition",
                                          "x-reactions": [
                                              {
                                                  "dependencies": [
                                                      "../use_variable"
                                                  ],
                                                  "when": "{{$deps[0] == 1}}",
                                                  "fulfill": {
                                                      "state": {
                                                          "visible": false
                                                      }
                                                  },
                                                  "otherwise": {
                                                      "state": {
                                                          "visible": true
                                                      }
                                                  }
                                              }
                                          ],
                                          "x-component-props": {}
                                      }
                                  },
                                  "x-reactions": [
                                      {
                                          "dependencies": [
                                              ".use_variable"
                                          ],
                                          "when": "{{$deps[0] == 1}}",
                                          "fulfill": {
                                              "state": {
                                                  "visible": false
                                              }
                                          },
                                          "otherwise": {
                                              "state": {
                                                  "visible": true
                                              }
                                          }
                                      }
                                  ],
                                  "x-validator": [],
                                  "x-component-props": {},
                                  "x-decorator-props": {}
                              },
                              "address":{
                                  "type":"array",
                                  "x-visible":"false",
                                  "x-reactions":{
                                      "dependencies": [
                                          ".use_variable",".address_variable",".address_static"
                                      ],
                                      "when": "{{$deps[0]?.length}}",
                                      "fulfill": {
                                          "state": {
                                              "value": "{{$deps[1]}}"
                                          }
                                      },
                                      "otherwise": {
                                          "state": {
                                              "value": "{{$deps[2]}}"
                                          }
                                      }
                                  }

                              }
                          },
                          "x-decorator-props": {
                              "labelCol": 6,
                              "wrapperCol": 10
                          },
                          "x-index": 0
                      },
                      "params": {
                          "type": "string",
                          "title": "参数",
                          "x-decorator": "FormItem",
                          "x-component": "SimpleMapComponent",
                          "x-validator": [],
                          "x-component-props": {
                              "placeholderKey": "请输入参数名",
                              "placeholderValue": "请输入参数值"
                          },
                          "x-decorator-props": {
                              "labelCol": 6,
                              "wrapperCol": 10
                          },
                          "x-index": 1
                      }
                  }
              }
          }
      }